{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _createClass from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp1\\\\htdocs\\\\teacher11\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { FormWithConstraints } from './FormWithConstraints';\nimport { withValidateFieldEventEmitter } from './withValidateFieldEventEmitter';\nimport flattenDeep from './flattenDeep';\n\nvar FieldFeedbacksComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FieldFeedbacksComponent, _React$Component);\n\n  function FieldFeedbacksComponent() {\n    _classCallCheck(this, FieldFeedbacksComponent);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FieldFeedbacksComponent).apply(this, arguments));\n  }\n\n  return FieldFeedbacksComponent;\n}(React.Component);\n\nexport var FieldFeedbacks =\n/*#__PURE__*/\nfunction (_withValidateFieldEve) {\n  _inherits(FieldFeedbacks, _withValidateFieldEve);\n\n  function FieldFeedbacks(props, context) {\n    var _this;\n\n    _classCallCheck(this, FieldFeedbacks);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FieldFeedbacks).call(this, props, context));\n    _this.fieldFeedbackKeyCounter = 0;\n\n    _this.validate =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(input) {\n        var _this$context, form, fieldFeedbacksParent, validations, field;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$context = _this.context, form = _this$context.form, fieldFeedbacksParent = _this$context.fieldFeedbacks;\n\n                if (!(input.name === _this.fieldName)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                field = form.fieldsStore.getField(_this.fieldName);\n\n                if (!(fieldFeedbacksParent && (fieldFeedbacksParent.props.stop === 'first' && field.hasFeedbacks(fieldFeedbacksParent.key) || fieldFeedbacksParent.props.stop === 'first-error' && field.hasErrors(fieldFeedbacksParent.key) || fieldFeedbacksParent.props.stop === 'first-warning' && field.hasWarnings(fieldFeedbacksParent.key) || fieldFeedbacksParent.props.stop === 'first-info' && field.hasInfos(fieldFeedbacksParent.key)))) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.next = 8;\n                return _this._validate(input);\n\n              case 8:\n                validations = _context.sent;\n\n              case 9:\n                return _context.abrupt(\"return\", validations);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var form = context.form,\n        fieldFeedbacksParent = context.fieldFeedbacks;\n    _this.key = fieldFeedbacksParent ? fieldFeedbacksParent.computeFieldFeedbackKey() : form.computeFieldFeedbacksKey();\n\n    if (fieldFeedbacksParent) {\n      _this.fieldName = fieldFeedbacksParent.fieldName;\n      if (props.for !== undefined) throw new Error(\"FieldFeedbacks cannot have a parent and a 'for' prop\");\n    } else {\n      if (props.for === undefined) throw new Error(\"FieldFeedbacks cannot be without parent and without 'for' prop\");else _this.fieldName = props.for;\n    }\n\n    return _this;\n  }\n\n  _createClass(FieldFeedbacks, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        fieldFeedbacks: this\n      };\n    }\n  }, {\n    key: \"computeFieldFeedbackKey\",\n    value: function computeFieldFeedbackKey() {\n      return \"\".concat(this.key, \".\").concat(this.fieldFeedbackKeyCounter++);\n    }\n  }, {\n    key: \"addFieldFeedback\",\n    value: function addFieldFeedback() {\n      return this.computeFieldFeedbackKey();\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$context2 = this.context,\n          form = _this$context2.form,\n          fieldFeedbacksParent = _this$context2.fieldFeedbacks;\n      form.fieldsStore.addField(this.fieldName);\n      var parent = fieldFeedbacksParent ? fieldFeedbacksParent : form;\n      parent.addValidateFieldEventListener(this.validate);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$context3 = this.context,\n          form = _this$context3.form,\n          fieldFeedbacksParent = _this$context3.fieldFeedbacks;\n      form.fieldsStore.removeField(this.fieldName);\n      var parent = fieldFeedbacksParent ? fieldFeedbacksParent : form;\n      parent.removeValidateFieldEventListener(this.validate);\n    }\n  }, {\n    key: \"_validate\",\n    value: function () {\n      var _validate2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(input) {\n        var arrayOfArrays, validations;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.emitValidateFieldEvent(input);\n\n              case 2:\n                arrayOfArrays = _context2.sent;\n                validations = flattenDeep(arrayOfArrays);\n                return _context2.abrupt(\"return\", validations);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _validate(_x2) {\n        return _validate2.apply(this, arguments);\n      }\n\n      return _validate;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = this.props.children;\n      return children !== undefined ? children : null;\n    }\n  }]);\n\n  return FieldFeedbacks;\n}(withValidateFieldEventEmitter(FieldFeedbacksComponent));\nFieldFeedbacks.defaultProps = {\n  stop: 'first-error'\n};\nFieldFeedbacks.contextTypes = {\n  form: PropTypes.instanceOf(FormWithConstraints).isRequired,\n  fieldFeedbacks: PropTypes.instanceOf(FieldFeedbacks)\n};\nFieldFeedbacks.childContextTypes = {\n  fieldFeedbacks: PropTypes.instanceOf(FieldFeedbacks).isRequired\n};","map":null,"metadata":{},"sourceType":"module"}